{% assign count = 0 %}
{% for block in section.blocks %}
  {% case block.type %}
    {% when 'announcement' %}
      <div class="custom-announcement-bar-{{ count }}">
      
        {% if template.name == 'index' or block.settings.show-on-homepage == false %}
        <a href="{{ block.settings.link }}" class="custom-announcement-bar_messaage-{{ count }}">
          <p class="custom-announcement-bar_messaage-{{ count }}">{{ block.settings.custom_announcent_bar_text }}</p>
        </a>
        {%  endif %}
      </div>


    <style>
      .custom-announcement-bar_messaage-{{ count }}{
        color: white;
        display: block;
        margin: 0 auto;
        background-color: {{block.settings.background-color}};
        padding: 10px 0;
        text-decoration: none;
        text-align: center;
      }
    
     .custom-announcement-bar_messaage-{{ count }}{
        {% if block.settings.bold-text %}
          font-weight: bold
        {% endif %}
    
        font-size: {{block.settings.font_size}}px;
        color: {{block.settings.font-color}};
        text-decoration: none;
        text-transform: {{block.settings.announcent_bar_text}};
        
      }
    </style>

    {% assign count = count | plus:1 %}
  {% endcase %}
{% endfor %}

{% schema %}
  {
    "name": "Custom Announcent Bar",
    "max_blocks": 4,

    "blocks": [{
      "type": "announcement",
      "name": "Announcement",
    "settings": [
       {
          "type": "checkbox",
          "id": "show-on-homepage",
          "label": "Show only on homepage",
          "default": false
        },
      {
          "type": "text",
          "id": "custom_announcent_bar_text",
          "label": "Announcent text",
          "default": "default text"
        },
      {
          "type": "checkbox",
          "id": "bold-text",
          "label": "Bold text",
          "default": true
        }, 
      {
            "type": "range",
            "id": "font_size",
            "min": 12,
            "max": 24,
            "step": 1,
            "unit": "px",
            "label": "Font size",
            "default": 16
          },
      {
          "type": "color",
          "id": "background-color",
          "label": "Background color",
          "default": "#ffffff"
        },
      {
          "type": "color",
          "id": "font-color",
          "label": "Font color",
          "default": "#ffffff"
        },
      {
          "type": "url",
          "id": "link",
          "label": "Link"
        },
      {
          "type": "select",
          "id": "announcent_bar_text",
          "label": "Announcen text",
          "options": [
            {
              "value": "normal",
              "label": "Normal"
            },
            {
              "value": "lowercase",
              "label": "Lowercase"
            },
            {
              "value": "uppercase",
              "label": "Uppercase"
            },
            {
              "value": "capitalise",
              "label": "Capitslise"
            }
          ],
          "default": "normal"
        }
    ]
    }]
  }
{% endschema %}

{% stylesheet %}
{% endstylesheet %}

{% javascript %}
{% endjavascript %}